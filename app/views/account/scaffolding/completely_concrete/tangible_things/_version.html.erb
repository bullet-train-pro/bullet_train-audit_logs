<%= render 'shared/version', version: version do |p| %>
  <% if version.event == "update" %>
    <% p.content_for :body do %>
      <% item = version.item&.reload %>
      <%= render 'shared/deltas/text_field', method: :text_field_value, before: version.reify.dup, after: (version.next.present? ? version.next.reify : item&.reload), version: version %>
      <%= render 'shared/deltas/boolean_field', method: :boolean_button_value, before: version.reify.dup, after: (version.next.present? ? version.next.reify : item&.reload), version: version %>
      <%= render 'shared/deltas/text_field', method: :ckeditor_value, before: version.reify.dup, after: (version.next.present? ? version.next.reify : item&.reload), version: version %>
      <%= render 'shared/deltas/buttons', method: :multiple_button_values, before: version.reify.dup, after: (version.next.present? ? version.next.reify : item&.reload), version: version %>
    <% end %>
  <% end %>
<% end %>
